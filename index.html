<!DOCTYPE html>
<head>
  <title>jsgui</title>
  <script src="jsgui.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="jsgui.css" />
  <script>
    const root = makeComponent(function root() {
      this.append(
        router({
          routes: {
            ".*": {
              component: () => mainPage(),
            },
          },
        })
      );
    });
    const mainPage = makeComponent(function root() {
      const state = this.useState({ username: "" });
      const [count, setCount] = this.useLocalStorage("count", 0);
      const wrapper = this.append(
        div({
          style: { display: "flex", flexDirection: "column", alignItems: "flex-start" },
        })
      );
      wrapper.append(
        textInput({
          label: "Username",
          value: state.username,
          onInput: (newUsername) => {
            state.username = newUsername;
            this.rerender();
          },
          autoFocus: true,
        })
      );
      wrapper.append(
        numberInput({
          label: "Count",
          value: count,
          onInput: (newCount) => {
            setCount(newCount === "" ? null : +newCount);
            this.rerender();
          },
          min: 0,
          clearable: false,
        })
      );
      wrapper.append(span(`state: ${JSON.stringify(state)}`));
      wrapper.append(span("Foo", { id: "foo" }));
      wrapper.append(span("Bar", { id: "bar" }));
      const rows = Array(+count)
        .fill()
        .map((_, i) => i);
      wrapper.append(
        table({
          label: "Stuff",
          rows,
          columns: [
            {
              label: "#",
              onRender: (props) => span(props.rowIndex + 1),
            },
            {
              label: "Name",
              onRender: (props) => span(`foo ${props.row}`),
            },
            {
              label: "Count",
              onRender: (props) => span(props.row),
            },
          ],
        })
      );
      if (count % 2 === 0) {
        wrapper.append(someComponent({ key: "someComponent" }));
      }
    });
    const someComponent = makeComponent(function someComponent(_props) {
      const lgOrBigger = this.useMedia({ minWidth: 1200 });
      this.append(span(`lgOrBigger: ${lgOrBigger}`));
    });
    renderRoot(root());
  </script>
</head>
<body></body>
